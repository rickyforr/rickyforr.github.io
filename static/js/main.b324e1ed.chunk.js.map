{"version":3,"sources":["app/app.actions.ts","communities/community/community.component.tsx","utils/app.utils.ts","communities/communities.component.tsx","header/header.component.tsx","app/app.tsx","index.tsx"],"names":["fetchData","setPending","onSuccess","onFailure","url","a","Axios","get","then","response","data","catch","Community","props","useState","noImage","setNoImage","community","houses","avgPrice","communityId","length","communityHouses","filter","h","map","c","price","reduce","v","toLocaleString","undefined","maximumFractionDigits","calculateAvgPrice","id","housesInCommunity","calculateHousesInCommunity","className","src","imgUrl","onError","alt","title","name","icon","faHome","Communities","communities","sortedCommunities","sort","b","localeCompare","sortCommunitiesByName","Header","App","setCommunities","setHouses","getCommunitiesPending","setGetCommunitiesPending","getHousesPending","setGetHousesPending","error","setError","loading","useEffect","console","log","data-name","color","size","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b324e1ed.chunk.js","sourcesContent":["import Axios from \"axios\";\r\n\r\n/**\r\n * Fetches app data from the api. Calls hooks to update pending, success and failure states.\r\n *\r\n * @param setPending\r\n * @param onSuccess\r\n * @param onFailure\r\n * @param url\r\n */\r\nexport const fetchData = async (\r\n  setPending: (value: React.SetStateAction<boolean>) => void,\r\n  onSuccess: (value: React.SetStateAction<any[]>) => void,\r\n  onFailure: (error: string) => void,\r\n  url: string\r\n) => {\r\n  setPending(true);\r\n  await Axios.get(url)\r\n    .then(function (response) {\r\n      onSuccess(response.data);\r\n      setPending(false);\r\n    })\r\n    .catch(function () {\r\n      onFailure(\"Sorry! There was an error loading data.\");\r\n      setPending(false);\r\n    });\r\n};\r\n","import { faChevronCircleUp, faHome, faHouseUser } from \"@fortawesome/free-solid-svg-icons\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport React, { useState } from \"react\";\r\nimport { calculateAvgPrice, calculateHousesInCommunity } from \"../../utils/app.utils\";\r\nimport \"./community.css\";\r\nimport { ICommunity } from \"./community.props.interface\";\r\n\r\n/**\r\n * Renders a single community and its relevant details.\r\n */\r\nconst Community: React.FunctionComponent<ICommunity> = (props) => {\r\n  const [noImage, setNoImage] = useState(false);\r\n  const { community, houses } = props;\r\n  const brokenSource = () => {\r\n    setNoImage(true);\r\n  };\r\n  const avgPrice = calculateAvgPrice(props.community.id, houses);\r\n  const housesInCommunity = calculateHousesInCommunity(props.community.id, houses);\r\n\r\n  return (\r\n    <div key={community.id} className=\"community-container\">\r\n      {!noImage ? <img className=\"community-image\" src={community.imgUrl} onError={brokenSource} alt=\"community\"></img> : <div className=\"image-placeholder\" />}\r\n      <div className=\"community-details\">\r\n        <span className=\"community-name\" title={community.name}>\r\n          {community.name}\r\n        </span>\r\n        <div className=\"price-houses-container\">\r\n          <span className=\"community-price\">Avg. Price: {avgPrice ? `$${avgPrice}` : \"Not Available\"}</span>\r\n          <span>\r\n            <FontAwesomeIcon icon={faHome} className=\"house-icon\" />\r\n            <span className=\"houses-amount\">{housesInCommunity || \"None Found\"}</span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Community;\r\n","import { Community, House } from \"../communities/communities.props.interface\";\r\n\r\n/**\r\n * Returns the average price of houses in a particular community.\r\n *\r\n * @param communityId\r\n * @param houses\r\n */\r\nexport const calculateAvgPrice = (communityId: string, houses: House[]): string => {\r\n  if (!houses?.length) {\r\n    return \"\";\r\n  }\r\n  const communityHouses = houses.filter((h) => h.communityId === communityId);\r\n  if (!communityHouses.length) {\r\n    return \"\";\r\n  }\r\n  const avgPrice = communityHouses.map((c) => c.price).reduce((a, v) => a + v) / communityHouses.length;\r\n  return avgPrice.toLocaleString(undefined, { maximumFractionDigits: 0 });\r\n};\r\n\r\n/**\r\n * Returns an array of communities sorted by the community name.\r\n *\r\n * @param communities\r\n */\r\nexport const sortCommunitiesByName = (communities: Community[]): Community[] => {\r\n  return communities.sort((a, b) => a.name.localeCompare(b.name));\r\n};\r\n\r\n/**\r\n * Return the amount of houses in a particular community.\r\n *\r\n * @param communityId\r\n * @param houses\r\n */\r\nexport const calculateHousesInCommunity = (communityId: string, houses: House[]): number => {\r\n  if (!houses.length) {\r\n    return 0;\r\n  }\r\n  const communityHouses = houses.filter((h) => h.communityId === communityId);\r\n  if (!communityHouses.length) {\r\n    return 0;\r\n  }\r\n  return communityHouses.length;\r\n};\r\n","import React from \"react\";\r\nimport { sortCommunitiesByName } from \"../utils/app.utils\";\r\nimport \"./communities.css\";\r\nimport { ICommunities } from \"./communities.props.interface\";\r\nimport Community from \"./community/community.component\";\r\n\r\n/**\r\n * Renders the communities and relevant details\r\n */\r\nconst Communities: React.FunctionComponent<ICommunities> = (props) => {\r\n  const { communities, houses } = props;\r\n  const sortedCommunities = sortCommunitiesByName(communities);\r\n\r\n  return (\r\n    <div className=\"communities-container\">\r\n      {!communities.length && <h3>No Communities to Display</h3>}\r\n      {!!communities.length && sortedCommunities.map((c) => <Community community={c} houses={houses} />)}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Communities;\r\n","import React from \"react\";\r\nimport \"./header.css\";\r\n\r\nconst Header = () => {\r\n  return (\r\n    <div className=\"header\">\r\n      <span className=\"title\">Community App</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React, { useEffect, useState } from \"react\";\nimport { fetchData } from \"./app.actions\";\nimport \"./app.css\";\nimport Communities from \"../communities/communities.component\";\nimport { Community, House } from \"../communities/communities.props.interface\";\nimport Header from \"../header/header.component\";\nimport Progress from \"react-svg-progress\";\n\n/**\n * Renders the root component for the application.\n */\nfunction App() {\n  const [communities, setCommunities] = useState<Community[]>([]);\n  const [houses, setHouses] = useState<House[]>([]);\n  const [getCommunitiesPending, setGetCommunitiesPending] = useState(false);\n  const [getHousesPending, setGetHousesPending] = useState(false);\n  const [error, setError] = useState(\"\");\n  const loading = getCommunitiesPending || getHousesPending;\n\n  useEffect(() => {\n    fetchData(setGetCommunitiesPending, setCommunities, setError, \"https://a18fda49-215e-47d1-9dc6-c6136a04a33a.mock.pstmn.io/communities\");\n    fetchData(setGetHousesPending, setHouses, (error) => console.log(error), \"https://a18fda49-215e-47d1-9dc6-c6136a04a33a.mock.pstmn.io/homes\");\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Header />\n      {error && (\n        <div data-name=\"error\" className=\"error-notification\">\n          {error}\n        </div>\n      )}\n      {loading && <Progress color=\"#223e6d\" size=\"30px\" />}\n      {!loading && !!communities.length && <Communities communities={communities} houses={houses} />}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./app/app\";\nimport \"./index.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}